@model BulkyBook.Models.ViewModels.ProductVm
@{
	ViewData["Title"] = "Upsert";
}
<style>
	.img-view{
		height:300px; 
		object-fit:scale-down;
	}
</style>

<form method="post" asp-action="Upsert" enctype="multipart/form-data">
	@if (Model.Product.Id == 0)
	{
		<div class="border-bottom p-3 mt-4 mb-4 row">
			<div class="row pb-2">
				<h2 class="text-success">Create Product</h2>
				<input asp-for="Product.Id" hidden/>
				<hr />
			</div>
			<div asp-validation-summary="All" class="text-danger"></div>
			<div class="mb-3">
				<label asp-for="Product.Title"></label>
				<input asp-for="Product.Title" class="form-control" />
				<span asp-validation-for="Product.Title" class="text-danger"></span>
			</div>
			<div class="mb-3">
				<label asp-for="Product.Description"></label>
				<textarea asp-for="Product.Description" rows="3" class="form-control"></textarea>
				<span asp-validation-for="Product.Description" class="text-danger"></span> 
			</div>
			<div class="mb-3 col-6">
				<label asp-for="Product.ISBN"></label>
				<input asp-for="Product.ISBN" class="form-control"/>
				<span asp-validation-for="Product.ISBN" class="text-danger"></span>
			</div>
			<div class="mb-3 col-6">
				<label asp-for="Product.Author"></label>
				<input asp-for="Product.Author" class="form-control"/>
				<span asp-validation-for="Product.Author" class="text-danger"></span>
			</div>
			<div class="mb-3 col-6">
				<label asp-for="Product.ListPrice"></label>
				<input asp-for="Product.ListPrice" class="form-control"/>
				<span asp-validation-for="Product.ListPrice" class="text-danger"></span>
			</div>
			<div class="mb-3 col-6">
				<label asp-for="Product.Price"></label>
				<input asp-for="Product.Price" class="form-control"/>
				<span asp-validation-for="Product.Price" class="text-danger"></span>
			</div>
			<div class="mb-3 col-6">
				<label asp-for="Product.Price50"></label>
				<input asp-for="Product.Price50" class="form-control"/>
				<span asp-validation-for="Product.Price50" class="text-danger"></span>
			</div>
			<div class="mb-3 col-6">
				<label asp-for="Product.Price100"></label>
				<input asp-for="Product.Price100" class="form-control"/>
				<span asp-validation-for="Product.Price100" class="text-danger"></span>
			</div>
			<div class="mb-3">
				<label asp-for="Product.ImageUrl"></label>
				<input type="file" name="file" class="form-control" id="uploadBox"/>
			</div>
			<div class="mb-3 col-6">
				<label asp-for="Product.CategoryId"></label>
				<select asp-for="Product.CategoryId" asp-items="@Model.CategoryList" class="form-control">
					<option disabled selected>--Select Category--</option>
				</select>
				<span asp-validation-for="Product.CategoryId" class="text-danger"></span>
			</div>
			<div class="mb-3 col-6">
				<label asp-for="Product.CoverTypeId"></label>
				<select asp-for="Product.CoverTypeId" asp-items="@Model.CoverTypeList" class="form-control">
					<option deseabled selected>--Select Coter Type--</option>
				</select>
				<span asp-validation-for="Product.CoverTypeId" class="text-danger"></span>
			</div>

			<div class="col-12">
				<button type="submit" onclick="return ValidateInput()" 
					class="btn btn-primary btn-lg col-6" style="width:150px">Create</button>
				<a asp-controller="Product" asp-action="index" 
					class="btn btn-outline-light btn-lg col-6" style="width:150px">Back to list</a>
			</div>
		</div>
	}
	else
	{
		<div class="row  border-bottom">
			<div class="row pb-1 mt-4">
				<h2 class="text-success">Edit Product</h2>
				<input asp-for="Product.Id" hidden/>
				<hr />
			</div>
			<div class="col-10">
				<div class="p-3 mt-2 mb-4 row">
					<div class="mb-3">
						<label asp-for="Product.Title"></label>
						<input asp-for="Product.Title" class="form-control" />
						<span asp-validation-for="Product.Title" class="text-danger"></span>
					</div>
					<div class="mb-3">
						<label asp-for="Product.Description"></label>
						<textarea asp-for="Product.Description" rows="3" class="form-control"></textarea>
						<span asp-validation-for="Product.Description" class="text-danger"></span> 
					</div>
					<div class="mb-3 col-6">
						<label asp-for="Product.ISBN"></label>
						<input asp-for="Product.ISBN" class="form-control"/>
						<span asp-validation-for="Product.ISBN" class="text-danger"></span>
					</div>
					<div class="mb-3 col-6">
						<label asp-for="Product.Author"></label>
						<input asp-for="Product.Author" class="form-control"/>
						<span asp-validation-for="Product.Author" class="text-danger"></span>
					</div>
					<div class="mb-3 col-6">
						<label asp-for="Product.ListPrice"></label>
						<input asp-for="Product.ListPrice" class="form-control"/>
						<span asp-validation-for="Product.ListPrice" class="text-danger"></span>
					</div>
					<div class="mb-3 col-6">
						<label asp-for="Product.Price"></label>
						<input asp-for="Product.Price" class="form-control"/>
						<span asp-validation-for="Product.Price" class="text-danger"></span>
					</div>
					<div class="mb-3 col-6">
						<label asp-for="Product.Price50"></label>
						<input asp-for="Product.Price50" class="form-control"/>
						<span asp-validation-for="Product.Price50" class="text-danger"></span>
					</div>
					<div class="mb-3 col-6">
						<label asp-for="Product.Price100"></label>
						<input asp-for="Product.Price100" class="form-control"/>
						<span asp-validation-for="Product.Price100" class="text-danger"></span>
					</div>
					<div class="mb-3">
						<label asp-for="Product.ImageUrl"></label>
						<input type="file" name="file" class="form-control" id="uploadBox"/>
					</div>
					<div class="mb-3 col-6">
						<label asp-for="Product.CategoryId"></label>
						<select asp-for="Product.CategoryId" asp-items="@Model.CategoryList" class="form-control">
							<option disabled selected>--Select Category--</option>
						</select>
						<span asp-validation-for="Product.CategoryId" class="text-danger"></span>
					</div>
					<div class="mb-3 col-6">
						<label asp-for="Product.CoverTypeId"></label>
						<select asp-for="Product.CoverTypeId" asp-items="@Model.CoverTypeList" class="form-control">
							<option deseabled selected>--Select Coter Type--</option>
						</select>
						<span asp-validation-for="Product.CoverTypeId" class="text-danger"></span>
					</div>

					<div class="mb-3">
						<button type="submit" class="btn btn-primary btn-lg col-6" style="width:150px">Update</button>
						<a asp-controller="Product" asp-action="index" class="btn btn-outline-light btn-lg col-6" style="width:150px">Back to list</a>
					</div>
				</div>
			</div>
			<div class="col-2 p-3 mb-4 row">
				<div class="mt-3">
				<label class="mb-2">Image Preview</label>
					<img src=@Model.Product.ImageUrl width="100%" style="border-radius:5px; border:1px solid white">		
					<input asp-for="Product.ImageUrl" type="text" name="oldFile" id="oldFileHidden" hidden/>	
				</div>
			</div>	
		</div>
	}
</form>

@section Scripts{
	@{
	<partial name="_ValidationScriptsPartial" />
	}
		<script>
			function ValidateInput()
			{
				if (document.getElementById("uploadBox").value == "") 
				{
					Swal.fire({
					  icon: 'error',
					  title: 'Oops...',
					  text: 'Image URL must be uploaded'
					})
					return false
				}
			}
		</script>
	}

							
@*				<div class="row">
					<div>
						<label>Image Preview</label>
						<img src=@Model.Product.ImageUrl class="form-control img-view">
						<label asp-for="Product.ImageUrl"></label>
						<input asp-for="Product.ImageUrl" type="file" name="file" class="form-control" id="uploadBox"/>
						<input asp-for="Product.ImageUrl" type="text" name="oldFile" id="oldFileHidden" hidden/>
					</div>
				</div>
*@
				
